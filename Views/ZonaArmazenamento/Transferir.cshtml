@model HealthWellbeing.Models.TransferenciaStock

@{
    ViewData["Title"] = "Transferir Stock";
}

<div class="container mt-4" style="max-width: 600px;">
    <div class="card shadow border-0">
        <div class="card-header bg-warning text-dark">
            <h4 class="mb-0 fw-bold"><i class="fas fa-exchange-alt me-2"></i>Transferir Stock</h4>
        </div>
        <div class="card-body bg-light">

            <div class="alert alert-white border shadow-sm mb-4">
                <h5 class="alert-heading text-primary fw-bold">
                    <i class="fas fa-box-open me-2"></i>Origem: @Model.ZonaOrigemNome
                </h5>
                <hr>
                <div class="row">
                    <div class="col-6">
                        <small class="text-muted text-uppercase">Produto</small><br />
                        <strong>@Model.ConsumivelNome</strong>
                    </div>
                    <div class="col-6 text-end">
                        <small class="text-muted text-uppercase">Disponível</small><br />
                        <span class="badge bg-success fs-6">@Model.QuantidadeAtualOrigem un.</span>
                    </div>
                </div>
            </div>

            <form asp-action="Transferir" method="post">
                <div asp-validation-summary="ModelOnly" class="text-danger mb-3 font-weight-bold"></div>

                <input type="hidden" asp-for="ZonaOrigemId" />
                <input type="hidden" asp-for="ZonaOrigemNome" />
                <input type="hidden" asp-for="ConsumivelNome" />
                <input type="hidden" asp-for="QuantidadeAtualOrigem" />

                <div class="mb-3">
                    <label asp-for="ZonaDestinoId" class="form-label fw-bold">📍 Zona de Destino</label>
                    <select asp-for="ZonaDestinoId" class="form-select" asp-items="ViewBag.ZonasDestino">
                        <option value="">-- Selecione a Zona de Destino --</option>
                    </select>
                    <span asp-validation-for="ZonaDestinoId" class="text-danger"></span>
                    <div class="form-text text-muted">
                        <i class="fas fa-info-circle me-1"></i> Apenas são mostradas zonas ativas que guardam este produto.
                    </div>
                </div>

                <div class="mb-4">
                    <label asp-for="QuantidadeATransferir" class="form-label fw-bold">🔢 Quantidade a Mover</label>
                    <div class="input-group">
                        <input asp-for="QuantidadeATransferir"
                               class="form-control"
                               type="number"
                               min="1"
                               max="@Model.QuantidadeAtualOrigem"
                               placeholder="Ex: 10" />
                        <span class="input-group-text">unidades</span>
                    </div>
                    <span asp-validation-for="QuantidadeATransferir" class="text-danger"></span>
                </div>

                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <a asp-action="Index" class="btn btn-secondary me-md-2">
                        <i class="fas fa-arrow-left me-1"></i> Cancelar
                    </a>
                    <button type="submit" class="btn btn-warning fw-bold">
                        Confirmar Transferência <i class="fas fa-chevron-right ms-1"></i>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script>
        // Este script traduz as mensagens automáticas do jQuery para Português
        $.extend($.validator.messages, {
            required: "Este campo é obrigatório.",
            remote: "Por favor, corrija este campo.",
            email: "Por favor, introduza um endereço de email válido.",
            url: "Por favor, introduza um URL válido.",
            date: "Por favor, introduza uma data válida.",
            number: "Por favor, introduza um número válido.",
            digits: "Por favor, introduza apenas dígitos.",
            equalTo: "Por favor, introduza o mesmo valor novamente.",
            maxlength: $.validator.format("Por favor, não introduza mais do que {0} caracteres."),
            minlength: $.validator.format("Por favor, introduza pelo menos {0} caracteres."),
            rangelength: $.validator.format("Por favor, introduza entre {0} e {1} caracteres."),
            range: $.validator.format("Por favor, introduza um valor entre {0} e {1}."),
            max: $.validator.format("Por favor, introduza um valor menor ou igual a {0}."),
            min: $.validator.format("Por favor, introduza um valor maior ou igual a {0}.")
        });
    </script>
}
