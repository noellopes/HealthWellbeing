@model HealthWellbeing.ViewModels.RegistoMateriais

@{
    ViewData["Title"] = "Detalhes do Consumo";
}

<div class="container mt-4">
    @* --- Cabeçalho --- *@
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1 class="h3 text-secondary">
            <i class="bi bi-info-circle me-2"></i>Detalhes do Material
        </h1>
        <div>
            <a asp-action="Edit" asp-route-id="@Model?.Id" class="btn btn-warning btn-sm">
                <i class="bi bi-pencil me-1"></i>Editar
            </a>
            <a asp-action="Index" class="btn btn-outline-secondary btn-sm">
                <i class="bi bi-arrow-left me-1"></i>Voltar
            </a>
        </div>
    </div>

    <div class="row">
        @* --- Coluna: Dados do Material --- *@
        <div class="col-md-6 mb-4">
            <div class="card shadow-sm border-0 h-100">
                <div class="card-header bg-primary text-white">
                    <h5 class="card-title mb-0"><i class="bi bi-box-seam me-2"></i>Informação do Material</h5>
                </div>
                <div class="card-body">
                    <dl class="row mb-0">
                        <dt class="col-sm-4 text-muted small text-uppercase">Nome</dt>
                        <dd class="col-sm-8 fw-bold">@Html.DisplayFor(model => model.Nome)</dd>

                        <dt class="col-sm-4 text-muted small text-uppercase">Tamanho</dt>
                        <dd class="col-sm-8">@Html.DisplayFor(model => model.Tamanho)</dd>

                        <dt class="col-sm-4 text-muted small text-uppercase">Quantidade</dt>
                        <dd class="col-sm-8">@Html.DisplayFor(model => model.Quantidade)</dd>

                        <dt class="col-sm-4 text-muted small text-uppercase">Estado</dt>
                        <dd class="col-sm-8">
                            <span class="badge bg-secondary">
                                @(Model.Estado != null ? Model.Estado.Nome : "N/D")
                            </span>
                        </dd>
                    </dl>
                </div>
            </div>
        </div>

        @* --- Coluna: Dados do Exame Associado --- *@
        <div class="col-md-6 mb-4">
            <div class="card shadow-sm border-0 h-100">
                <div class="card-header bg-success text-white">
                    <h5 class="card-title mb-0"><i class="bi bi-person-badge me-2"></i>Vínculo ao Exame</h5>
                </div>
                <div class="card-body">
                    <dl class="row mb-0">
                        <dt class="col-sm-4 text-muted small text-uppercase">Utente</dt>
                        <dd class="col-sm-8 fw-bold text-success">
                            @(Model.Exame?.Utente != null ? Model.Exame.Utente.Nome : "Utente não carregado")
                        </dd>

                        <dt class="col-sm-4 text-muted small text-uppercase">Data/Hora</dt>
                        <dd class="col-sm-8">
                            @Model.Exame?.DataHoraMarcacao.ToString("dd/MM/yyyy HH:mm")
                        </dd>

                        <dt class="col-sm-4 text-muted small text-uppercase">Estado Exame</dt>
                        <dd class="col-sm-8">
                            <span class="badge border text-dark">
                                @Html.DisplayFor(model => model.Exame.Estado)
                            </span>
                        </dd>

                        <dt class="col-sm-4 text-muted small text-uppercase">Notas Exame</dt>
                        <dd class="col-sm-8 small italic text-muted">
                            @(string.IsNullOrEmpty(Model.Exame?.Notas) ? "Sem notas adicionais." : Model.Exame.Notas)
                        </dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>

    @* --- Rodapé de IDs --- *@
    <div class="text-end text-muted mt-2" style="font-size: 0.75rem;">
        <span>Material ID: @Model.Id</span> | <span>Exame ID: @Model.ExameId</span>
    </div>
</div>