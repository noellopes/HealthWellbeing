@model HealthWellbeing.Models.Exercicio

@{
    ViewData["Title"] = "Exercício Não Encontrado";

    // Recuperar IDs
    var selectedGeneros = ViewData["GenerosIds"] as int[] ?? new int[0];
    var selectedGrupos = ViewData["GruposMuscularesIds"] as int[] ?? new int[0];
    var selectedEquipamentos = ViewData["EquipamentosIds"] as int[] ?? new int[0];
    var selectedProblemas = ViewData["ProblemasSaudeIds"] as int[] ?? new int[0];

    // Recuperar os Novos (Atenção às maiúsculas/minúsculas nas Strings)
    var selectedObjetivos = ViewData["ObjetivosFisicosIds"] as int[] ?? new int[0];
    var selectedTipos = ViewData["TipoExerciciosIds"] as int[] ?? new int[0];
}

<h1 class="mb-4 text-danger">@ViewData["Title"]</h1>

<div class="alert alert-warning d-flex align-items-center p-4 border border-warning rounded shadow-sm">
    <div class="ps-4">
        <h4 class="alert-heading mb-2">O registo não existe</h4>
        <p class="mb-0">
            O exercício foi eliminado por outro utilizador. Clique abaixo para o restaurar.
        </p>
    </div>
</div>

@if (Model != null)
{
    <div class="card border-info mb-4 shadow-sm">
        <div class="card-body">
            <h5 class="card-title">Deseja salvar como novo registo?</h5>

            <form asp-action="Create" method="post">
                @Html.AntiForgeryToken()

                <input type="hidden" asp-for="ExercicioNome" />
                <input type="hidden" asp-for="Descricao" />
                <input type="hidden" asp-for="Duracao" />
                <input type="hidden" asp-for="Intencidade" />
                <input type="hidden" asp-for="CaloriasGastas" />
                <input type="hidden" asp-for="Instrucoes" />
                <input type="hidden" asp-for="Repeticoes" />
                <input type="hidden" asp-for="Series" />

                @foreach (var id in selectedGeneros)
                {
                    <input type="hidden" name="generosIds" value="@id" />
                }
                @foreach (var id in selectedGrupos)
                {
                    <input type="hidden" name="GrupoMuscularIds" value="@id" />
                }
                @foreach (var id in selectedEquipamentos)
                {
                    <input type="hidden" name="equipamentosIds" value="@id" />
                }
                @foreach (var id in selectedProblemas)
                {
                    <input type="hidden" name="problemasSaudeIds" value="@id" />
                }

                @foreach (var id in selectedObjetivos)
                {
                    <input type="hidden" name="objetivosFisicosIds" value="@id" />
                }

                @foreach (var id in selectedTipos)
                {
                    <input type="hidden" name="tipoExerciciosIds" value="@id" />
                }

                <div class="mt-3">
                    <button type="submit" class="btn btn-success">Adicionar Novamente</button>
                    <a asp-action="Index" class="btn btn-secondary">Cancelar</a>
                </div>
            </form>
        </div>
    </div>
}