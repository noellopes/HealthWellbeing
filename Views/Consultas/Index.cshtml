@model IEnumerable<HealthWellbeing.Models.Consulta>

@{
    ViewData["Title"] = "Consultas";

    string Badge(string estado) => estado switch
    {
        "Cancelada" => "badge bg-danger",
        "Expirada" => "badge bg-secondary",
        "Hoje" => "badge bg-warning text-dark",
        _ => "badge bg-success"
    };
}

<div class="container py-4">

    <!-- Cabeçalho -->
    <div class="d-flex align-items-center justify-content-between mb-4">
        <h2 class="fw-bold mb-0 text-primary">
            <i class="bi bi-calendar-check me-2"></i> Marcação de Consultas
        </h2>
        <a asp-action="Create" class="btn btn-primary btn-lg shadow-sm px-4">
            <i class="bi bi-plus-circle me-2"></i> Marcar Consulta
        </a>
    </div>

    <!-- Caso não existam consultas -->
    @if (Model is null || !Model.Any())
    {
        <div class="alert alert-info text-center shadow-sm rounded-4 py-4">
            <i class="bi bi-info-circle fs-4 me-2"></i>
            Ainda não existem consultas.
            <br />
            <small>Clique em <strong>Marcar Consulta</strong> para criar a primeira.</small>
        </div>
    }
    else
    {
        <!-- Tabela -->
        <div class="card shadow-sm border-0 rounded-4 overflow-hidden">
            <div class="table-responsive">
                <table class="table table-hover align-middle mb-0">
                    <thead class="table-light text-center">
                        <tr>
                            <th class="fw-semibold">Data Marcação</th>
                            <th class="fw-semibold">Data Consulta</th>
                            <th class="fw-semibold">Hora Início</th>
                            <th class="fw-semibold">Hora Fim</th>
                            <th class="fw-semibold">Estado</th>
                            <th class="fw-semibold text-end pe-4">Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.OrderByDescending(c => c.DataConsulta))
                        {
                            var estado = item.Estado;
                            <tr class="text-center">
                                <td>@item.DataMarcacao.ToString("dd/MM/yyyy HH:mm")</td>
                                <td>@item.DataConsulta.ToString("dd/MM/yyyy HH:mm")</td>
                                <td>@item.HoraInicio.ToString("HH\\:mm")</td>
                                <td>@item.HoraFim.ToString("HH\\:mm")</td>
                                <td>
                                    <span class="@Badge(estado) px-3 py-2 rounded-pill">@estado</span>
                                </td>
                                <td class="text-end">
                                    <div class="btn-group" role="group">
                                        <a asp-action="Details" asp-route-id="@item.IdConsulta" class="btn btn-outline-info btn-sm px-3 me-1">
                                            <i class="bi bi-eye me-1"></i> Detalhes
                                        </a>
                                        <a asp-action="Edit" asp-route-id="@item.IdConsulta" class="btn btn-outline-secondary btn-sm px-3 me-1">
                                            <i class="bi bi-pencil me-1"></i> Editar
                                        </a>
                                        <a asp-action="Delete" asp-route-id="@item.IdConsulta" class="btn btn-outline-danger btn-sm px-3">
                                            <i class="bi bi-trash me-1"></i> Apagar
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    }
</div>

@section Scripts {
    <!-- Nenhum script adicional -->
}